
<!doctype html>
<html>
  <meta charset="utf-8" />
  <title>Posts (Fetch + Pagination)</title>
  <body>
    <h1>Posts</h1>
    <div id="state"></div>
    <ul id="list"></ul>
    <button id="more">Tải thêm</button>
    <script>
      let page = 1, loading=false, finished=false;
      const state = document.getElementById('state');
      const ul = document.getElementById('list');
      const btn = document.getElementById('more');

      async function load(){
        if(loading || finished) return;
        loading = true;
        state.textContent = 'Đang tải...';
        try {
          const res = await fetch('https://jsonplaceholder.typicode.com/posts?_page='+page+'&_limit=10');
          if(!res.ok) throw new Error('Lỗi mạng');
          const data = await res.json();
          if(!data.length){ finished=true; state.textContent='Hết dữ liệu'; btn.disabled=true; return; }
          ul.insertAdjacentHTML('beforeend', data.map(p=>'<li><b>'+p.id+'</b> '+p.title+'</li>').join(''));
          page++;
          state.textContent = '';
        } catch (e){
          state.textContent = 'Lỗi: ' + e.message;
        } finally {
          loading=false;
        }
      }
      btn.onclick = load;
      load();
    </script>
  </body>
</html>
